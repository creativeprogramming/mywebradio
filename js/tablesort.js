tableSort=new Class({options:{table:"sorttable",column:0,firstsort:false},initialize:function(b,a){this.table=b;this.column=a;this.titles=$$("#"+b+" thead th");this.titles[this.column].className="asc";i=0;this.titles.each(function(c){c.setProperty("column",i);c.addEvent("click",function(){this.sort(c)}.bind(this));i++}.bind(this))},reset:function(a){this.titles[this.column].className="";this.column=a;this.titles[a].className="desc"},sort:function(b){var d=b.getProperty("column");var e=$$("#"+this.table+" tbody tr");if(!e[0].childNodes[d]){return}var c=new Array;i=0;e.each(function(f){c.push(f.childNodes[d].innerHTML+"|"+i);i++});this.asc=(b.className=="desc")?false:true;if(this.firstsort&&d==this.column){c.reverse()}else{this.firstsort=true;switch(b.getProperty("axis")){case"string":c.sort();break;case"number":c.sort(this.numsort);break}}var a=new Element("tbody");if(!window.ie){a.setStyle("height",$(this.table).lastChild.getSize().size.y)}i=0;c.each(function(f){n=f.split("|").pop();e[n].className=(i%2)?e[n].className.replace("odd","even"):e[n].className.replace("even","odd");a.appendChild(e[n]);i++});$(this.table).replaceChild(a,$(this.table).lastChild);if(d!=this.column){this.titles[this.column].className=""}this.column=d;b.className=(this.asc)?"desc":"asc"},numsort:function(d,c){d=parseInt(d.split("|").shift());c=parseInt(c.split("|").shift());return d-c}});